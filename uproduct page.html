<%@ page import = "java.sql.*"%>
<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8" %>
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>期末網站</title>
		<link rel="shortcut icon" type="image/png" href="./images/logo.jpg"/>
		<link rel="stylesheet" type="text/css" href="CSS/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="CSS/bootstrap.css">
		<link rel="stylesheet" href="./CSS/style.css">
		<link rel="stylesheet" href="./CSS/product page.css">
		<link rel="stylesheet" href="./css/flexslider.css" >
		<link href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
		
	</head>
	<body>
			<header class="container-fluid w-100">
      <div class="menu-wrap">
        <nav class="menu">
          <div class="menu-list">
         <a href="ix.html">
              <span>經典素面</span>
            </a>
            <a  href="ixr.html">
              <span>可愛卡通</span>
            </a>
            <a  href="i8.html">
              <span>獨家設計</span>
            </a>
            <a  href="s10.html">
              <span>簡約質感</span>
            </a>
            <a  href="other.html">
              <span>其他商品</span>
            </a>
          </div>
        </nav>
        <button class="close-button" id="close-button">Close Menu</button>
      </div>
      <button class="menu-button" id="open-button">
        <span></span>
        <span></span>
        <span></span>
      </button>
			<label class="tittle">
				<a href="index.html" class="tittle"><p class="tittle">JIC shop</p></a>
			</label>
			
				
				<ul id="vip" class="vip">
					<a href="cart.html"><li class="tittle" ><img src="./img/shopping-cart.png" class="vip"></li></a>
					<li class="tittle">
						<img src="./img/vip.png" class="vip" onclick="document.getElementById('login').style.display='block'">
						<div id="login" class="modal">
							<div class="login-form">
								<input type="radio" name="tab" class="tab" id="sign-up-tab" checked>
								<label class="login" for="sign-up-tab" class="tab-header">SIGN UP</label>
								<input type="radio" name="tab" class="tab" id="sign-in-tab">
								<label class="login" for="sign-in-tab" class="tab-header">SIGN IN</label>
								<form id="sign-up">
									<span onclick="document.getElementById('login').style.display='none'"
									class="close" title="Close" style="color:white;">&times;</span>
									<div class="header">Sign up for free</div>
									<div class="form-input">
										<input type="text" class="input" id="new-username" placeholder="User Name" required/>
									</div>
									<div class="form-input">
										<input type="email" class="input" id="email" placeholder="Email Address" required/>
									</div>
									<div class="form-input">
										<input type="password" class="input" id="new-password" placeholder="Password" required/>
									</div>
									<input type="submit" id="sign-up-btn" class="submit-button" value="SIGN UP">
								</form>
								<form id="sign-in">
									<span onclick="document.getElementById('login').style.display='none'"
									class="close" title="Close" style="color:white;">&times;</span>
									<div class="header">Welcome Back</div>
									<div class="form-input">
										<input type="text" class="input" id="username" placeholder="User Name" required/>
									</div>
									<div class="form-input">
										<input type="password" class="input" id="password" placeholder="Password" required/>
									</div>
									<input type="checkbox"><span id="check">Keep me signed in</span>
									<input type="submit" id="sign-in-btn" class="submit-button" value="SIGN IN">
								</form>
							</div>
						</div>
					</li>
					<li class="search">
						<a href="search.html"><img src="img/search.png" id="search_pic"></a>
						<form action="" method="post">
							<input type="text" name="search" id="search" size="10" placeholder="search">
						</form>
						
					</li>
				</ul>
			
		</header>
		<div class="bread">
			<ol class="breadcrumb breadcolor">
				<li><a href="index.html" class="breadfont">Home</a>/</li>
				<li>簡約質感</li>
			</ol>
		</div>
		<section>
			<div class="container">
				<div class="row">
						<%
try {

    Class.forName("com.mysql.jdbc.Driver");
    try {
        String url="jdbc:mysql://localhost/?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC";
        Connection con=DriverManager.getConnection(url,"root","1234");
        if(con.isClosed())
           out.println("連線建立失敗");
        else
        {	
				con.createStatement().execute("USE phone");
				String uid = request.getParameter("uid");
				String sql="select * from uproduct_1 where uid='"+uid+"'";
				ResultSet rs=con.createStatement().executeQuery(sql);
			
			while(rs.next())         
			   {  %>
				<div class="col-12 col-md-3">
						
							<div class="col-12 mb-5">
								<h4>類似商品</h4>
								<div class="d-block sidebar-product-list">
									
									<a href="product.html" class="d-inline-block">
										<img src="./images/product/eva_1.jpg" alt="LTG-BY-0001" class="d-inline-block product-list-img">
										<h6 class="d-inline-block">LTG-BY-0001</h6>
									</a>
								</div>
								<div class="d-block sidebar-product-list">
									
									<a href="product.html" class="d-inline-block">
										<img src="./images/product/eva_1.jpg" alt="LTG-BY-0001" class="d-inline-block product-list-img">
										<h6 class="d-inline-block">LTG-BY-0001</h6>
									</a>
								</div>
							</div>
					</div>
					<div class="col-12 col-md-9">
						<div class="row">
							<div class="container-slider">
								<div class="mySlides">
									<div class="numbertext">1 / 2</div>
									<img src="<%out.print(rs.getString("uphoto"));%>" style="width:80%">
								</div>
								<div class="mySlides">
									<div class="numbertext">2 / 2</div>
									<img src="<%out.print(rs.getString("uphoto"));%>" style="width:80%">
								</div>
								
								<a class="prev" onclick="plusSlides(-1)">❮</a>
								<a class="next" onclick="plusSlides(1)">❯</a>
								<div class="slider-row">
									<div class="column">
										<img class="demo cursor" src="<%out.print(rs.getString("uphoto"));%>" style="width:70%" onclick="currentSlide(1)">
									</div>
									<div class="column">
										<img class="demo cursor" src="<%out.print(rs.getString("uphoto"));%>" style="width:70%" onclick="currentSlide(2)">
									</div>
									
								</div>
							</div>
							<div class="col-12 col-md-6">
								<h4><%out.print(rs.getString("uname"));%></h4>
								<h5 class='new-price'>
								<small class="price">
								<del>NT$&nbsp;<%out.print(rs.getString("umoney"));%></del>
								</small>
								NT$&nbsp;<%out.print(rs.getString("umoney"));%>
								</h5>
								<p><%out.print(rs.getString("udescribe"));%></p>
								<div class="d-block mb-3">
									<p class="mb-0 d-inline-block">數量</p>
									<form action="" class="d-inline-block">
										<input type="number" class="form-control w-25" id="quantity" value="1">
									</form>
								</div>
								<div class="select" style="width:200px;">
									<select>
										<option value="0">選擇型號:</option>
										<option value="1">IPHONE5</option>
										<option value="2">IPHONE6/6S</option>
										<option value="3">IPHONE7/7S</option>
										<option value="4">IPHONE8/8S</option>
										<option value="5">IPHONEX/XS</option>
									</select>
								</div>
								
								<div class="mb-3">
									<a href="cart.html" class="btn btn-primary text-white mr-1">加入購物車</a>
									<a href="checkout.html" class="btn btn-secondary text-white">直接結帳</a>
								</div>
							</div>
<%
				}
		}
        con.close();
		}
    catch (SQLException sExec) {
        out.println("SQL錯誤"+sExec.toString());
    }
}
catch (ClassNotFoundException err) {
	out.println("class錯誤"+err.toString());
}%>	
							  <div class="col-12 mt-5 mb-5">
                            <div class='example'>
			        <div class='tabsholder3'>
			            <div data-tab="留言板">
			                <div class="board-history">
								<div class="board-pic"><img src="img/1.jpg" title="" style="width:100%;"></div>
								<div class="board-content">
								<%
try {
//Step 1: 載入資料庫驅動程式 
    Class.forName("com.mysql.jdbc.Driver");
    try {
//Step 2: 建立連線 	
        String url="jdbc:mysql://localhost/?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC";
        String sql="";
        Connection con=DriverManager.getConnection(url,"root","1234");
        if(con.isClosed())
           out.println("連線建立失敗");
        else {
//Step 3: 選擇資料庫   
           sql="use phone";
           con.createStatement().execute(sql);
//Step 4: 執行 SQL 指令, 若要操作記錄集, 需使用executeQuery, 才能傳回ResultSet	
           sql="select * from board"; //算出共幾筆留言
           ResultSet rs=con.createStatement().executeQuery(sql);

           //先移到檔尾, getRow()後, 就可知道共有幾筆記錄
           rs.last();
           int total_content=rs.getRow();
           


           //讀取page變數
           String page_string = request.getParameter("page");
           if (page_string == null) 
               page_string = "1";  //無留言時將頁數指標訂為1        
           Integer current_page=Integer.valueOf(page_string);//將page_string轉成整數
           //Integer current_page=Integer.valueOf(request.getParameter("page"));
	       //計算開始記錄位置   
//Step 5: 顯示結果 
           int start_record=(current_page-1)*3;
           //遞減排序, 讓最新的資料排在最前面
           sql="SELECT * FROM board ORDER BY bid DESC LIMIT ";//LIMIT是限制傳回筆數
           sql+=start_record+",3";
           rs=con.createStatement().executeQuery(sql);
		   
//  逐筆顯示, 直到沒有資料(最多還是5筆)
           while(rs.next())
                {
				 out.println("姓名:"+rs.getString("bname")+"<br>");
				 out.println("E-mail:"+rs.getString("bmail")+"<br>");
				 out.println("內容:"+rs.getString("bcontent")+"<br>");
				 out.println("時間:"+rs.getString("putdate")+"<br><hr>");
          }
		             //每頁顯示5筆, 算出共幾頁
           int page_num=(int)Math.ceil((double)total_content/3.0); //無條件進位
		   if (page_num==0) //無留言時將頁數指標訂為1
		       page_num=1;
           out.println("請選擇頁數");
           //使用超連結方式, 呼叫自己, 使用get方式傳遞參數(變數名稱為page)
           for(int i=1;i<=page_num;i++) //使用get傳輸方式,建立1,2,...頁超連結
              {
				out.print("<a href='uproduct page.jsp?page="+i+"'>"+i+"</a>&nbsp;"); //&nbsp;html的空白

           }
		   	out.println("共"+page_num+"頁，目前在第"+current_page+"頁<p>");
			out.println("<form name='f' action='uproduct page.jsp' method='get'>跳至<input type='text' size='1‘ name='page' value=1>頁<input type='submit' value='送出'>");              
			out.println("<hr>");
			out.println("<p>");
//Step 6: 關閉連線
          con.close();
      }
    }
    catch (SQLException sExec) {
           out.println("SQL錯誤");
    }
}
catch (ClassNotFoundException err) {
      out.println("class錯誤");
}
%>
								</div>
								
								</div>
			            </div>
			            <div data-tab="留言">
			              <div class="message">
								
									<form action="add.jsp" class="STYLE-NAME">
										<label>
											<span>Your Name :</span>
											<input id="name" type="text" name="name" placeholder="Your Full Name" />
										</label>
										<label>
											<span>Your Email :</span>
											<input id="email" type="email" name="mail" placeholder="Valid Email Address" />
										</label>
										<label>
											<span>Message :(30字內)</span>
											<textarea id="message" name="content" maxlength="30" placeholder="Your Message to Us"></textarea>
										</label>
										<label>
										<span> 評分:</span>
										  <div class="rating-stars block">
               								 <div class="rating-stars-container">
                  							  <div class="rating-star">
                   							     <i class="fa fa-star"></i>
                 							   </div>
                 							   <div class="rating-star">
                       							 <i class="fa fa-star"></i>
                  							  </div>
                  							  <div class="rating-star">
                    						    <i class="fa fa-star"></i>
                   							 </div>
                   							 <div class="rating-star">
                    						    <i class="fa fa-star"></i>
                 							   </div>
                   							 <div class="rating-star">
                    						    <i class="fa fa-star"></i>
                   							 </div>
               							 </div>
           							 </div>

										</label>
										
										<label>
											<span>&nbsp;</span>
											<input type="submit" class="button" value="Send" id="btn" />
										</label>
									</form>
								</div>
			            </div>
			        </div>
		        </div>
                        </div>
					</div>
					
				</div>
			</div>
		</div>
		</section>
	</body>
		
			<footer class="container-fluid">
				&copy;© Copyright JIC 2019. All rights reserved.<br><br>
				<a href="https://www.facebook.com/profile.php?id=100003151478137"><img src="img/W.png" id="member" title="兆崴"></a> &nbsp;
				<a href="https://www.facebook.com/profile.php?id=100002695652164"><img src="img/Z.png" id="member" title="慶瑜"></a> &nbsp;
				<a href="https://www.facebook.com/profile.php?id=100000192364709" title=""><img src="img/C.png" id="member" title="文馨"></a> &nbsp;
				<a href="https://www.facebook.com/profile.php?id=100008184541824"><img src="img/S.png" id="member" title="筱凌"></a>
			</footer>

	<script defer src="./js/slider.js"></script>
	<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>

        

    <script src="js/jquery.rating-stars.min.js"></script>
    <script>
        var ratingOptions = {
            selectors: {
                starsSelector: '.rating-stars',
                starSelector: '.rating-star',
                starActiveClass: 'is--active',
                starHoverClass: 'is--hover',
                starNoHoverClass: 'is--no-hover',
                targetFormElementSelector: '.rating-value'
            }
        };

        $(".rating-stars").ratingStars(ratingOptions);

        $(".rating-stars").on("ratingChanged", function (ev, data) {
            $("#ratingChanged").html(data.ratingValue);
        });

        $(".rating-stars").on("ratingOnEnter", function (ev, data) {
            $("#ratingOnEnter").html(data.ratingValue);
        });

        $(".rating-stars").on("ratingOnLeave", function (ev, data) {
            $("#ratingOnLeave").html(data.ratingValue);
        });
    </script>
      <script src="js/smooth-scroll.min.js" type="text/javascript"></script>
		      <script src="js/classie.js" type="text/javascript"></script>
		        <script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
		           <script src="js/main.js" type="text/javascript"></script>
		         	<script>window.jQuery || document.write('<script src="js/jquery-1.11.0.min.js"><\/script>')</script>
	<script type='text/javascript' src='js/jquery.cardtabs.js'></script>
	<script type='text/javascript'>
            $('.tabsholder1').cardTabs();
            $('.tabsholder2').cardTabs({theme: 'inset'});
            $('.tabsholder3').cardTabs({theme: 'graygreen'});
            $('.tabsholder4').cardTabs({theme: 'wiki'});
        </script>
</body>

</html>